<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EvaluateYou</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.0.0/animate.min.css"
    />
    <style>
      .result-text {
        font-size: 28px;
        font-weight: bold;
        margin-top: -65px;
        text-align: center;
        font-family: "Trocchi";
        animation-duration: 6s;
      }
      body {
        height: 100%;
        background-image: linear-gradient(315deg, #c3e6d6 46%, #aed0e0 54%);
      }

      .card-img-top,
      .card {
        width: 500px;
        height: 400px;
        border-radius: 10%;
      }
      .card-img-top {
        opacity: 0.3;
      }
      #wrapper {
        position: relative;
        margin: auto;
      }
      #meter {
        width: 100%;
        height: 100%;
        transform: rotateX(180deg);
      }
      .circle {
        fill: none;
        transition: all 4s ease-in-out;
      }
      .outline,
      #mask {
        stroke: #f1f1f1;
        stroke-width: 25;
      }
      .range {
        stroke-width: 10;
      }
      #meter_needle {
        height: 30%;
        left: 0;
        margin: auto;
        position: absolute;
        right: 0;
        top: 20%;
        transform-origin: bottom center;
        transition: all 4s ease-in-out;
        transform: rotate(270deg);
      }
    </style>
  </head>
  <body onload="range_change_event()">
    <div class="p-2 nav-bar-section d-flex justify-content-center">
      <!--Navigation Bar Start-->

      <a class="navbar-brand" href="#">
        <img
          class="logo p-1 rounded-circle"
          src="/static/images/logo.png"
          width="120"
          height="120"
          alt=""
        />
      </a>

      <!--Navigation Bar End-->
    </div>
    <div class="d-flex justify-content-center">
      <div class="card mt-3">
        <div class="container">
          <div id="wrapper">
            <svg id="meter">
              <circle
                id="outline_curves"
                class="circle outline"
                cx="50%"
                cy="50%"
              ></circle>

              <circle
                id="low"
                class="circle range"
                cx="50%"
                cy="50%"
                stroke="#FF0000"
              ></circle>

              <circle
                id="avg"
                class="circle range"
                cx="50%"
                cy="50%"
                stroke="#FF6347"
              ></circle>
              <circle
                id="more-avg"
                class="circle range"
                cx="50%"
                cy="50%"
                stroke="#FFC300"
              ></circle>

              <circle
                id="most-avg"
                class="circle range"
                cx="50%"
                cy="50%"
                stroke="#FFFF00"
              ></circle>
              <circle
                id="less-high"
                class="circle range"
                cx="50%"
                cy="50%"
                stroke="#90EE90"
              ></circle>

              <circle
                id="high"
                class="circle range"
                cx="50%"
                cy="50%"
                stroke="#228B22"
              ></circle>

              <circle id="mask" class="circle" cx="50%" cy="50%"></circle>

              <circle
                id="outline_ends"
                class="circle outline"
                cx="50%"
                cy="50%"
              ></circle>
            </svg>
            <img
              id="meter_needle"
              type="image/svg+xml"
              src="/static/images/svg+xml/svg-meter-gauge-needle.svg"
              alt=""
            />
          </div>
          <div id="result-text-wrapper">
            <p class="result-text animate__animated animate__zoomInDown">
              Estimated Result: {{final_result}}
            </p>
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
      integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
      integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
      crossorigin="anonymous"
    ></script>
    <script src="//code.jquery.com/jquery-2.1.4.min.js"></script>
    <script>
      var result = "{{final_result}}";
      var r = 100;
      var circles = document.querySelectorAll(".circle");
      var total_circles = circles.length;
      for (var i = 0; i < total_circles; i++) {
        circles[i].setAttribute("r", r);
      }

      /* Set meter's wrapper dimension */
      var meter_dimension = r * 2 + 100;
      var wrapper = document.querySelector("#wrapper");
      wrapper.style.width = meter_dimension + "px";
      wrapper.style.height = meter_dimension + "px";

      /* Add strokes to circles  */
      var cf = 2 * Math.PI * r;
      var semi_cf = cf / 2;
      var semi_cf_1by2 = semi_cf / 2;
      var semi_cf_2by5 = (semi_cf * 2) / 5;
      var semi_cf_3by10 = (semi_cf * 3) / 10;
      var semi_cf_1by5 = (semi_cf * 1) / 5;

      var semi_cf_1by10 = semi_cf / 10;
      document
        .querySelector("#outline_curves")
        .setAttribute("stroke-dasharray", semi_cf + "," + cf);
      document
        .querySelector("#low")
        .setAttribute("stroke-dasharray", semi_cf + "," + cf);
      document
        .querySelector("#avg")
        .setAttribute("stroke-dasharray", semi_cf_1by2 + "," + cf);
      document
        .querySelector("#more-avg")
        .setAttribute("stroke-dasharray", semi_cf_2by5 + "," + cf);
      document
        .querySelector("#most-avg")
        .setAttribute("stroke-dasharray", semi_cf_3by10 + "," + cf);
      document
        .querySelector("#less-high")
        .setAttribute("stroke-dasharray", semi_cf_1by5 + "," + cf);
      document
        .querySelector("#high")
        .setAttribute("stroke-dasharray", semi_cf_1by10 + "," + cf);
      document
        .querySelector("#outline_ends")
        .setAttribute("stroke-dasharray", 2 + "," + (semi_cf - 2));
      document
        .querySelector("#mask")
        .setAttribute("stroke-dasharray", semi_cf + "," + cf);

      /* Bind input event*/
      var mask = document.querySelector("#mask");
      var meter_needle = document.querySelector("#meter_needle");
      function range_change_event() {
        var percent;
        if (result == "Below 50%") {
          percent = 30;
          document.querySelector(".result-text").style.color= "#ff0000";
          
        } else if (result == "50-60%") {
          percent = 55;
          document.querySelector(".result-text").style.color= "#ff6347";
        } else if (result == "60-70%") {
          percent = 65;
          document.querySelector(".result-text").style.color= "#ffc300";
        } else if (result == "70-80%") {
          percent = 75;
          document.querySelector(".result-text").style.color= "#ffff00";
        } else if (result == "80-90%") {
          percent = 85;
          document.querySelector(".result-text").style.color= "#90ee90";
        } 
        else {
          percent = 95;
          document.querySelector(".result-text").style.color= "#228B22";
        }
        var meter_value = semi_cf - (percent * semi_cf) / 100;
        mask.setAttribute("stroke-dasharray", meter_value + "," + cf);
        meter_needle.style.transform =
          "rotate(" + (270 + (percent * 180) / 100) + "deg)";
      }
    </script>
  </body>
</html>
